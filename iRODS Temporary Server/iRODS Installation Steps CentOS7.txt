# Run each of these commands one by one into the command line:

sudo yum update
sudo yum install postgresql-server postgresql-contrib
sudo postgresql-setup initdb
sudo systemctl start postgresql
sudo su - postgres
psql
CREATE USER irods WITH PASSWORD 'password';
CREATE DATABASE "ICAT";
GRANT ALL PRIVILEGES ON DATABASE "ICAT" TO irods;
\q
exit
sudo rpm --import https://packages.irods.org/irods-signing-key.asc
sudo yum install wget
wget -qO - https://packages.irods.org/renci-irods.yum.repo | sudo tee /etc/yum.repos.d/renci-irods.yum.repo
sudo yum install epel-release
sudo yum install irods-server irods-database-plugin-postgres
sudo sed -i '164,165d' /var/lib/irods/scripts/setup_irods.py
sudo sed -i 's/ident/md5/g' /var/lib/pgsql/data/pg_hba.conf
sudo systemctl restart postgresql
sudo python /var/lib/irods/scripts/setup_irods.py
# At this point you will be promted to enter a bunch of information about the iRODS install. Feel free to change any of it you want,
# but the defautls are fine for the most part. When the script asks for the following fields below, you can use the suggested values
# (because defaults are not given):
# Database password: password
# iRODS server's zone key: TEMPORARY_zone_key
# iRODS server's negotiation key: TEMPORARY_32byte_negotiation_key
# Control Plane key: TEMPORARY__32byte_ctrl_plane_key
# iRODS server's administrator password: password
sudo sed -i 's/CS_NEG_DONT_CARE/CS_NEG_REFUSE/g' /etc/irods/core.re
sudo su irods
/var/lib/irods/irodsctl restart